---
import Layout from '@/layouts/Layout.astro';
import siteData from '../../../siteData.mjs';
import { getCollection } from 'astro:content';
import type { CollectionEntry } from 'astro:content';

type postDataType = CollectionEntry<'posts'>;

const posts: postDataType[] = await getCollection('posts');
const pageId = 'posts',
  pageMeta = siteData[pageId],
  ldJSON = [
    {
      '@type': 'ListItem',
      position: 1,
      item: {
        '@id': 'https://example.com/',
        name: 'HOME'
      }
    },
    {
      '@type': 'ListItem',
      position: 2,
      item: {
        '@id': 'https://example.com/posts/',
        name: '投稿一覧'
      }
    }
  ];
---

<Layout
  pageName={pageId}
  title={pageMeta.title}
  description={pageMeta.description}
  ogpImage={pageMeta.ogpImage}
  type={pageMeta.type}
  path={pageMeta.path}
  ldJSON={ldJSON}
>
  <main class="l-main p-page">
    <h1>投稿一覧</h1>
    {
      posts.map((post: postDataType) => (
        <li>
          <a href={`/posts/${post.data.id}`}>{post.data.title}</a>
        </li>
      ))
    }
  </main>
</Layout>
